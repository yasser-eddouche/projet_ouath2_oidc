<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/order-service/src/main/java/ma/enset/orderservice/dtos/OrderResponse.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/order-service/src/main/java/ma/enset/orderservice/dtos/OrderResponse.java" />
              <option name="originalContent" value="package ma.enset.orderservice.dtos;&#10;&#10;import lombok.Builder;&#10;import lombok.Data;&#10;&#10;import java.time.LocalDateTime;&#10;import java.util.List;&#10;&#10;@Data&#10;@Builder&#10;public class OrderResponse {&#10;    private Long id;&#10;    private LocalDateTime orderDate;&#10;    private String status;&#10;    private double totalAmount;&#10;    private List&lt;OrderItemResponse&gt; items;&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package ma.enset.orderservice.dtos;&#10;&#10;import lombok.Builder;&#10;import lombok.Data;&#10;import ma.enset.orderservice.models.Product;&#10;&#10;import java.time.LocalDateTime;&#10;import java.util.List;&#10;&#10;@Data&#10;@Builder&#10;public class OrderResponse {&#10;    private Long id;&#10;    private LocalDateTime orderDate;&#10;    private String status;&#10;    private double totalAmount;&#10;    private List&lt;Product&gt; items;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/order-service/src/main/java/ma/enset/orderservice/entities/Order.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/order-service/src/main/java/ma/enset/orderservice/entities/Order.java" />
              <option name="originalContent" value="package ma.enset.orderservice.entities;&#10;&#10;import jakarta.persistence.*;&#10;import lombok.*;&#10;import ma.enset.orderservice.models.Product;&#10;&#10;import java.time.LocalDateTime;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;@Entity&#10;@Table(name = &quot;orders&quot;)&#10;@Data&#10;@Builder&#10;@NoArgsConstructor&#10;@AllArgsConstructor&#10;public class Order {&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    private Long id;&#10;&#10;    private LocalDateTime orderDate;&#10;&#10;    @Enumerated(EnumType.STRING)&#10;    private OrderStatus status;&#10;&#10;    private double totalAmount;&#10;&#10;    private String userId;&#10;&#10;    @Transient&#10;    @Builder.Default&#10;    private List&lt;Product&gt; items = new ArrayList&lt;&gt;();&#10;}&#10;" />
              <option name="updatedContent" value="package ma.enset.orderservice.entities;&#10;&#10;import jakarta.persistence.*;&#10;import lombok.*;&#10;import ma.enset.orderservice.models.Product;&#10;&#10;import java.time.LocalDateTime;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;@Entity&#10;@Table(name = &quot;orders&quot;)&#10;@Data&#10;@Builder&#10;@NoArgsConstructor&#10;@AllArgsConstructor&#10;public class Order {&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    private Long id;&#10;&#10;    private LocalDateTime orderDate;&#10;&#10;    @Enumerated(EnumType.STRING)&#10;    private OrderStatus status;&#10;&#10;    private double totalAmount;&#10;&#10;    private String userId;&#10;&#10;    @ElementCollection&#10;    @CollectionTable(name = &quot;order_products&quot;, joinColumns = @JoinColumn(name = &quot;order_id&quot;))&#10;    private List&lt;Product&gt; items = new ArrayList&lt;&gt;();&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/order-service/src/main/java/ma/enset/orderservice/mappers/OrderMapper.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/order-service/src/main/java/ma/enset/orderservice/mappers/OrderMapper.java" />
              <option name="originalContent" value="package ma.enset.orderservice.mappers;&#10;&#10;import ma.enset.orderservice.dtos.*;&#10;import ma.enset.orderservice.entities.Order;&#10;import ma.enset.orderservice.entities.OrderStatus;&#10;import org.springframework.stereotype.Component;&#10;&#10;import java.time.LocalDateTime;&#10;import java.util.List;&#10;&#10;@Component&#10;public class OrderMapper {&#10;&#10;    public Order toEntity(OrderRequest request, String userId, List&lt;OrderItem&gt; items, double totalAmount) {&#10;        Order order = new Order();&#10;        order.setOrderDate(LocalDateTime.now());&#10;        order.setStatus(OrderStatus.PENDING);&#10;        order.setTotalAmount(totalAmount);&#10;        order.setUserId(userId);&#10;        order.setItems(items);&#10;        items.forEach(i -&gt; i.setOrder(order));&#10;        return order;&#10;    }&#10;&#10;    public OrderResponse toResponse(Order order) {&#10;        return OrderResponse.builder()&#10;                .id(order.getId())&#10;                .orderDate(order.getOrderDate())&#10;                .status(order.getStatus().name())&#10;                .totalAmount(order.getTotalAmount())&#10;                .items(order.getItems().stream().map(this::toItemResponse).toList())&#10;                .build();&#10;    }&#10;&#10;    private OrderItemResponse toItemResponse(OrderItem item) {&#10;        return OrderItemResponse.builder()&#10;                .productId(item.getProductId())&#10;                .quantity(item.getQuantity())&#10;                .unitPrice(item.getUnitPrice())&#10;                .lineTotal(item.getLineTotal())&#10;                .build();&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package ma.enset.orderservice.mappers;&#10;&#10;import ma.enset.orderservice.dtos.OrderResponse;&#10;import ma.enset.orderservice.entities.Order;&#10;import org.springframework.stereotype.Component;&#10;&#10;@Component&#10;public class OrderMapper {&#10;&#10;    public OrderResponse toResponse(Order order) {&#10;        return OrderResponse.builder()&#10;                .id(order.getId())&#10;                .orderDate(order.getOrderDate())&#10;                .status(order.getStatus().name())&#10;                .totalAmount(order.getTotalAmount())&#10;                .items(order.getItems())&#10;                .build();&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/order-service/src/main/java/ma/enset/orderservice/models/Product.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/order-service/src/main/java/ma/enset/orderservice/models/Product.java" />
              <option name="originalContent" value="package ma.enset.orderservice.models;&#10;&#10;import lombok.Getter;&#10;import lombok.Setter;&#10;&#10;@Getter @Setter&#10;public class Product {&#10;    private Long id;&#10;    private String name;&#10;    private String description;&#10;    private double price;&#10;    private int quantity;&#10;}&#10;" />
              <option name="updatedContent" value="package ma.enset.orderservice.models;&#10;&#10;import jakarta.persistence.Embeddable;&#10;import lombok.AllArgsConstructor;&#10;import lombok.Builder;&#10;import lombok.Getter;&#10;import lombok.NoArgsConstructor;&#10;import lombok.Setter;&#10;&#10;@Embeddable&#10;@Getter&#10;@Setter&#10;@NoArgsConstructor&#10;@AllArgsConstructor&#10;@Builder&#10;public class Product {&#10;    private Long id;&#10;    private String name;&#10;    private String description;&#10;    private double price;&#10;    private int quantity;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/order-service/src/main/resources/application.properties">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/order-service/src/main/resources/application.properties" />
              <option name="originalContent" value="server.port=8082&#10;&#10;spring.application.name=order-service&#10;&#10;# Spring Cloud Config - optional so app can run standalone&#10;spring.cloud.config.enabled=false&#10;spring.config.import=optional:configserver:http://localhost:9999&#10;&#10;# PostgreSQL datasource&#10;spring.datasource.url=jdbc:postgresql://localhost:5432/orderdb&#10;spring.datasource.username=order_user&#10;spring.datasource.password=order_pass&#10;spring.datasource.driver-class-name=org.postgresql.Driver&#10;&#10;# JPA/Hibernate&#10;spring.jpa.hibernate.ddl-auto=update&#10;spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect&#10;spring.jpa.show-sql=true&#10;&#10;# OAuth2 Resource Server&#10;spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8080/realms/microservices-realm&#10;&#10;# Eureka Discovery&#10;eureka.client.service-url.defaultZone=http://localhost:8761/eureka&#10;eureka.instance.prefer-ip-address=true&#10;&#10;# Actuator&#10;management.endpoints.web.exposure.include=*&#10;" />
              <option name="updatedContent" value="server.port=8082&#10;&#10;spring.application.name=order-service&#10;&#10;# Spring Cloud Config - optional so app can run standalone&#10;spring.cloud.config.enabled=false&#10;spring.config.import=optional:configserver:http://localhost:9999&#10;&#10;# PostgreSQL datasource&#10;spring.datasource.url=jdbc:postgresql://localhost:5499/orderdb&#10;spring.datasource.username=order_user&#10;spring.datasource.password=order_pass&#10;spring.datasource.driver-class-name=org.postgresql.Driver&#10;&#10;# JPA/Hibernate&#10;spring.jpa.hibernate.ddl-auto=update&#10;spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect&#10;spring.jpa.show-sql=true&#10;&#10;# OAuth2 Resource Server&#10;spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8080/realms/microservices-realm&#10;&#10;# Eureka Discovery&#10;eureka.client.service-url.defaultZone=http://localhost:8761/eureka&#10;eureka.instance.prefer-ip-address=true&#10;&#10;# Actuator&#10;management.endpoints.web.exposure.include=*" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>